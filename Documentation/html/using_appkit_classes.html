<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
    <head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <title>BaseTen Reference Manual</title>
    <link href="documentation.css" rel="stylesheet" type="text/css">
</head>
<body>
    <div id="logo-container">
        <a id="logo" href="index.html">
            <img src="http://basetenframework.org/chrome/site/trac_banner.png" alt="">
        </a>
    </div>
    <div class="container">
<!-- Generated by Doxygen 1.8.8 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="general_usage.html">Using BaseTen framework</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Using BaseTenAppKit </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>When BaseTenAppKit is linked to an application, BXDatabaseContext gains some additional capabilities. If given a partial database URI, it will present a number of connection panels when -connect: is called.</p>
<p>BXDatabaseObjects may be used much in the same manner as NSManagedObjects to populate various Cocoa views. To handle some situations unique to BaseTen, some NSController subclasses have been provided with the framework. For now, the only directly usable one is <a class="el" href="interface_b_x_synchronized_array_controller.html" title="An NSArrayController subclass for use with BaseTen. ">BXSynchronizedArrayController</a>. Additionally, there is <a class="el" href="protocol_b_x_controller-p.html">BXController</a> and additions to NSController for creating controller subclasses.</p>
<p>BaseTenAppKit contains a plug-in for Interface Builder. The plug-in should get loaded automatically if the framework is added to a project.</p>
<dl class="section note"><dt>Note</dt><dd>Under some circumstances the outlets and actions won't show up when the plug-in has been loaded for the first time. If this happens, save and close your document and open it again. Also relaunching Interface Builder has solved the issue.</dd></dl>
<h1><a class="anchor" id="bxsynchronizedarraycontroller"></a>
BXSynchronizedArrayController</h1>
<p>Compared to NSArrayController, <a class="el" href="interface_b_x_synchronized_array_controller.html" title="An NSArrayController subclass for use with BaseTen. ">BXSynchronizedArrayController</a> can do the following things: </p><ul>
<li>
It can present errors to the user when creating a new object fails. </li>
<li>
It can get a <a class="el" href="interface_b_x_entity_description.html" title="An entity description contains information about a specific table or view in a given database...">BXEntityDescription</a> from its database context and fetch objects using it. NSEntityDescriptions cannot be used because they are CoreData-specific. </li>
<li>
It can lock the edited row in the database when an editing session begins. </li>
<li>
It can provide the selected objects' ids. </li>
</ul>
<p><a class="el" href="interface_b_x_synchronized_array_controller.html" title="An NSArrayController subclass for use with BaseTen. ">BXSynchronizedArrayController</a> shouldn't be set to entity mode; the user interface for this isn't even available in Interface Builder. It also doesn't make use of a managed object context.</p>
<p><a class="el" href="interface_b_x_synchronized_array_controller.html" title="An NSArrayController subclass for use with BaseTen. ">BXSynchronizedArrayController</a>'s Content Set may be bound to another synchronized array controller with a key path that represents a relationship. In case of a one-to-many relationship, the foreign key field values will also be set when -newObject or -createObject: gets called.</p>
<h1><a class="anchor" id="using_bxdatabasecontext_ib"></a>
Using BXDatabaseContext from Interface Builder</h1>
<ol>
<li>
Load the BaseTen plug-in. </li>
<li>
Create a new nib file. </li>
<li>
Drag a database context from the library to the file. </li>
<li>
Select the database context and choose Attributes from the inspector's pop-up menu. </li>
<li>
Enter a valid database URI, <code>pgsql:///<em>database_name</em></code> at minimum. </li>
</ol>
<h1><a class="anchor" id="using_bxsynchronizedarraycontroller_ib"></a>
Using BXSynchronizedArrayController from Interface Builder</h1>
<ol>
<li>
Drag a <a class="el" href="interface_b_x_synchronized_array_controller.html" title="An NSArrayController subclass for use with BaseTen. ">BXSynchronizedArrayController</a> from the library to the file. </li>
<li>
Select the array controller and choose Attributes from the inspector's pop-up menu. </li>
<li>
Enter a table name into the field. <ul>
<li>
The schema field may be left empty, in which case <em>public</em> will be used. </li>
</ul>
</li>
<li>
Bind the Cocoa views to the controller. </li>
<li>
Bind the array controller to the database context using the Database Context binding or connect the databaseContext outlet. </li>
<li>
Test the interface. The views should be populated using the database. </li>
</ol>
<h1><a class="anchor" id="using_value_transformers_ib"></a>
Using BaseTenAppKit's value transformers from Interface Builder</h1>
<p>When database rows get locked, it might be desirable to disable editing and indicate this visually in the user interface. Most AppKit's classes, have an Editable binding, and some, like NSTableColumn, have bindings that affect the display of their value. Lets say a table column's <em>Value</em> is bound to a BXArrayController using <em>my_key</em> as the model key path. BaseTenAppKit could then be used to set the rows to be conditionally editable like this: </p><ol>
<li>
Select the table column inside its table view </li>
<li>
Open the Bindings Inspector </li>
<li>
Click the Editable binding </li>
<li>
Set the binding to the array controller and set the controller key to <em>arrangedObjects</em>. </li>
<li>
Set the model key to <em>statusInfo.my_key</em>. </li>
<li>
Set the value transformer to <em><a class="el" href="interface_b_x_object_status_to_editable_transformer.html" title="Transforms and object&#39;s status into a boolean indicating, whether it&#39;s editable or not...">BXObjectStatusToEditableTransformer</a></em>. </li>
</ol>
<p>The rows may also be coloured so that their status is visible: </p><ol>
<li>
Inspecting the same column as in the previous example, click the Text Color binding. </li>
<li>
Set the binding to the array controller and set the controller key to <em>arrangedObjects</em>. </li>
<li>
Set the model key to <em>statusInfo.my_key</em>. </li>
<li>
Set the value transformer to <em><a class="el" href="interface_b_x_object_status_to_color_transformer.html" title="Transforms an object status to a colour. ">BXObjectStatusToColorTransformer</a></em>. </li>
</ol>
</div></div><!-- contents -->
</div>
<div class="footer"></div>
</body>
</html>
